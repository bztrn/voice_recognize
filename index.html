<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Reconhecimento de Voz</title>
</head>
<body>
	<p id="ola">Olá tableless, você falou:</p>
 
<div id="transcription"></div>
 
<button id="rect">Gravar</button>
 
<span id="unsupported" class="hidden">API not supported</span>
</body>
<script>

	// Test browser support
	window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;
	 
	//caso não suporte esta API DE VOZ            
	if (window.SpeechRecognition === null) {
		document.getElementById('unsupported').classList.remove('hidden');
	}else {
		//......
	}

	var recognizer = new window.SpeechRecognition();

	var transcription = document.getElementById("transcription");
 
	//Para o reconhecedor de voz, não parar de ouvir, mesmo que tenha pausas no usuario
	recognizer.continuous = true;

    recognizer.onresult = function(event){
		transcription.textContent = "";
		for (var i = event.resultIndex; i < event.results.length; i++) {
			if(event.results[i].isFinal){
				transcription.textContent = event.results[i][0].transcript;
			}else{
            	transcription.textContent += event.results[i][0].transcript;
			}
		}
	}


	document.querySelector("#rect").addEventListener("click",function(){
		try {
            recognizer.start();
          } catch(ex) {
          	alert("error: "+ex.message);
          }
	});

</script>
</html>